version = '2.1.0'
//version += '-SNAPSHOT'

dependencies {

    compile project(':xtraplatform-crs-api')
    compile project(':xtraplatform-geotools')

    provided  group: 'de.interactive_instruments', name: 'xtraplatform-akka',   version: '1.1.5'

    embedded group: 'com.sun.xsom', name: 'xsom', version: '20140925'
    embedded group: 'com.fasterxml', name: 'aalto-xml', version: '1.0.0'
    embedded group: 'com.fasterxml.staxmate', name: 'staxmate', version: '2.2.1'

    //embedded group: 'com.typesafe.akka', name: 'akka-stream_2.12', version: '2.5.9'
    embedded (group: 'com.lightbend.akka', name: 'akka-stream-alpakka-xml_2.12', version: '0.17') {
        transitive = false
    }

    testCompile group: 'com.typesafe.akka', name: 'akka-http_2.12',   version: '10.1.5'
    testCompile group: 'com.typesafe.akka', name: 'akka-testkit_2.12', version: '2.5.18'
}
 
jar {
    manifest { 
        instruction 'Embed-Dependency',
            'xsom',
            'aalto-xml',
            //'woodstox-core',
            'staxmate',
//                'akka-stream_2.12',
//                'akka-http_2.12',
                'akka-stream-alpakka-xml_2.12'
            
        instruction 'Embed-Transitive', 'true'
        instruction 'Embed-Export', 'true'
        
        
        instructionFirst 'Import-Package', '!org.apache.xml.*'
        
        instruction 'Import-Package', 'javax.xml.stream.util'
        instruction 'Import-Package', 'javax.xml.stream.events'
        instruction 'Import-Package', 'org.xml.sax.helpers'

        instruction 'Import-Package', 'sun.misc'
        instruction 'Import-Package', 'javax.net.ssl'
        instruction 'Import-Package', 'sun.security.util'
        instruction 'Import-Package', 'sun.security.x509'
        instruction 'Import-Package', 'javax.crypto'
        instruction 'Import-Package', 'javax.naming'

    }
}
